---
import { buttonVariants } from '@/components/ui/button'
import Link from '@/components/Link.astro'
import { SOCIAL_LINKS, ICON_MAP } from '@/consts'
import { Icon } from 'astro-icon/components'
import { Image } from 'astro:assets'

interface Props {
  image?: string
  quote?: string
  class?: string
}

const { 
  image = '/placeholder-profile.jpg',
  quote = 'Security researcher, blue teamer, and continuous learner.',
  class: className = ''
} = Astro.props
---

<aside class={`rounded-lg border overflow-hidden flex flex-col w-64 shrink-0 h-full ${className}`}>
  <!-- Profile Image -->
  <div class="w-full flex items-center justify-center p-4 shrink-0">
    {image && (
      <img
        src={image}
        alt="Profile"
        class="w-24 h-24 rounded-full object-contain transition-transform duration-500 hover:rotate-360 cursor-pointer"
        style="transition: transform 0.6s ease-in-out;"
        onmouseover="this.style.transform='rotate(360deg)'"
        onmouseout="this.style.transform='rotate(0deg)'"
      />
    )}
  </div>

  <!-- Content Section -->
  <div class="p-4 flex flex-col gap-2 flex-1 justify-between">
    <div class="flex flex-col gap-2">
      <!-- Quote/Bio Row -->
      <div class="flex items-start gap-1.5">
        <Icon name="lucide:quote" class="size-3.5 text-muted-foreground shrink-0 mt-0.5" />
        <p class="text-xs text-muted-foreground italic leading-snug">
          {quote}
        </p>
      </div>

      <!-- Follow Button Row -->
      <Link
        href="https://github.com/vieTins"
        class={buttonVariants({ variant: 'default', size: 'sm' }) + ' w-full'}
        external
      >
        <Icon name="lucide:user-plus" class="size-3.5 mr-1.5" />
        Follow Me
      </Link>
    </div>

    <!-- Contact Icons Row -->
    <div class="pt-2 border-t">
      <p class="text-xs text-muted-foreground mb-2 font-medium uppercase tracking-wide">
        Connect
      </p>
      <ul class="flex flex-wrap gap-1.5" role="list">
        {
          SOCIAL_LINKS.map(({ href, label }) => (
            <li>
              <Link
                href={href}
                aria-label={label}
                title={label}
                class={buttonVariants({ variant: 'outline', size: 'icon' }) + ' h-8 w-8'}
                external
              >
                <Icon
                  name={
                    ICON_MAP[label as keyof typeof ICON_MAP] ||
                    'lucide:message-circle-question'
                  }
                  class="size-3.5"
                />
              </Link>
            </li>
          ))
        }
      </ul>
    </div>
  </div>
</aside>
